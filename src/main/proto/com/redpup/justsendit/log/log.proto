edition = "2023";

package com.redpup.justsendit.log;

import "google/protobuf/timestamp.proto";
import "com/redpup/justsendit/model/player/decision.proto";
import "com/redpup/justsendit/model/board/hex/hex_point.proto";

option java_package = "com.redpup.justsendit.log.proto";
option java_multiple_files = true;

// A log message caused by any game action.
message Log {
  // When the log occurred in real time.
  google.protobuf.Timestamp timestamp = 1;

  // When the log occurred in the game.
  int32 day = 2;
  int32 turn = 3;
  int32 subturn = 4;

  // Who triggered the log
  string player_name = 5;
  string controller_name = 6;

  // The log that occurred.
  oneof event {
    model.player.MountainDecision mountain_decision = 7;
    PlayerMove player_move = 8;
    SkiRideAttempt ski_ride_attempt = 9;
  }
}

// A log of a player moving around the mountain.
message PlayerMove {
  model.board.hex.HexPoint from = 1;
  model.board.hex.HexPoint to = 2;
}

// A log of a player attempting to ski/ride a tile.
message SkiRideAttempt {
  int32 base_difficulty = 1;
  int32 speed_difficulty = 2;
  repeated int32 card_value = 3;
  int32 bonus_value = 4;
  bool success = 5;
}
